Извинявам се, ако долните указания са прекалено неясни. С времето се надявам да
се подобрят. ;-)

ВНИМАНИЕ: Всички указания са дадени така, сякаш ще се изпълняват върху
операционната система ГНУ/Линукс.

----------------------------------------
1. Необходим софтуер
----------------------------------------

Ето какво ще ви е необходимо, за да пуснете софтуера на Моята библиотека:

* Уеб сървър с PHP 5.x
Препоръчвам Apache 2.0. С друг не съм правил тестове, но най-вероятно и
Apache 1.3 ще върши работа.

* MySQL сървър
Ползвам MySQL 5.0.x, но би трябвало да работи и с MySQL 4.0.x.

Екстри
------
За да можете да пращате електронна поща, е необходимо да инсталирате пакета Mail
от PEAR (http://pear.php.net/). Ако пък искате да ползвате SMTP, ще ви е нужен и
пакета Net.

----------------------------------------
2. Разархивиране
----------------------------------------

Разкомпресирайте архива в директорията, от която уеб сървъра сервира съдържание.
Във въпросната директория ще се създаде нова папка с име mylib. По-надолу ще се
обръщам към тази нова папка с името /PATH/TO/MYLIB-DIR.

Разбира се, можете да сложите софтуера в коя да е директория, стига сървъра да
може да я намери след това. ;-) Прегледайте раздела „4. Достъп чрез http“ за
повече информация.

Сега е нужно да разрешите на софтуера (сървъра) да пише в следните директории:
cache/, log/, to-do/ и всички поддиректории на content/

Това става най-лесно през командния ред:
  cd /PATH/TO/MYLIB-DIR ; chmod a+w cache log to-do content/*

След това копирайте файла conf/main.ini.example като conf/main.ini:
  cp conf/main.ini.example conf/main.ini

----------------------------------------
3. База от данни
----------------------------------------

3.1.а. Нова база от данни

Създайте нова база от данни за новата библиотека. По желание можете да създадете
и отделен потребител, който да има достъп до новата база от данни. Избора е ваш.

3.1.б. Съществуваща база от данни

Ако нямате възможност да създадете нова база от данни, можете да ползвате
съществуваща такава. В такъв случай си изберете представка за новите таблици,
за да не се получат проблеми с наличните таблици в базата.

След това отворете файла tables.sql и заменете низа „/*prefix*/“ с избраната
представка плюс долна черта. Например, ако сте избрали „ml“ за представка,
заменете „/*prefix*/“ с „ml_“.

3.2. Настройки

В конфигурационния файл (conf/main.ini), в раздела [db], попълнете
променливите server, user, pass и name.

3.3. Популация

Накрая вмъкнете съдържанието на файла tables.sql в новата база от данни.
Ако искате да направите копие на Моята библиотека, си вземете текущия SQL дъмп
от http://purl.org/NET/mylib/about

----------------------------------------
4. Достъп чрез http
----------------------------------------

По подразбиране конфигурационния файл (conf/main.ini) съдържа следните два реда:

  webroot = /mylib/index.php
  docroot = /mylib

webroot указва пътя към основния скрипт, например:
http://localhost/mylib/index.php

docroot указва пряк път към статичните файлове, например:
http://localhost/mylib/img/favicon.png

За да промените успешно променливите webroot и docroot, е нужно да имате достъп
до конфигурационния файл на Апаче (httpd.conf). Ако искате да ползвате следните
стойности:

  webroot = /mylib
  docroot = /mylib-docroot

трябва да добавите долните два реда в httpd.conf:

  Alias /mylib /PATH/TO/MYLIB-DIR/index.php
  Alias /mylib-docroot /PATH/TO/MYLIB-DIR

По този начин основния скрипт ще се извиква чрез http://localhost/mylib, а
статичните файлове чрез http://localhost/mylib-docroot/SOMEFILE.STATIC

----------------------------------------
5. Красиви адреси
----------------------------------------

Към края на февруари 2007 в софтуера е вградена зависимост от сървърната
променлива PATH_INFO. В случай че сървъра не я подава, е нужно да добавите

  AcceptPathInfo On

в конфигурационния файл на Апаче (httpd.conf). Разгледайте документацията на
Апаче за повече информация.

В бъдеще ще добавя възможност за правилно фунцкиониране на софтуера и в случай
че PATH_INFO липсва.

----------------------------------------
6. Администраторска сметка
----------------------------------------

След като подкарате софтуера, е добре да си създадете администраторска сметка,
за да можете да разглеждате и страниците, забранени за обикновени потребители.

Първо се регистрирайте, а след това пратете следната заявка към базата от данни
(нека MY_USERNAME е потребителското ви име):

  UPDATE /*prefix*/user SET `group` = 'a' WHERE username = 'MY_USERNAME';

----------------------------------------
7. Обратна връзка
----------------------------------------

Има вероятност да сте стигнали дотук и все още да не сте успели да подкарате
софтуера. В такъв случай ми пишете и кажете кое ви затруднява. Така лека-полека
тези указания ще се подобрят.

Пишете ми и в случай че има какво да ми пишете. ;-)
